

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Tutorial 2: Regression and Decision Trees on the Dengue Fever Dataset &#8212; Climatematch Academy: Computational Tools for Climate Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/W2D5_ClimateResponse-AdaptationImpact/student/W2D5_Tutorial2';</script>
    <link rel="shortcut icon" href="../../../_static/cma-logo-square-4xp.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Tutorial 3: Logistic Regression and ANN on the Remote Sensing Crop Dataset" href="W2D5_Tutorial3.html" />
    <link rel="prev" title="Tutorial 1: Linear and Logistic Regression" href="W2D5_Tutorial1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/cma-logo-square-4xp.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../../_static/cma-logo-square-4xp.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Schedule/schedule_intro.html">Schedule</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Schedule/daily_schedules.html">General Schedule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Schedule/shared_calendars.html">Shared calendars</a></li>
</ul>
</li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../TechnicalHelp/tech_intro.html">Technical Help</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../TechnicalHelp/Jupyterbook.html">Using jupyterbook</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../TechnicalHelp/Tutorial_jupyterhub.html"><strong>Using JupyterHub</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../TechnicalHelp/Tutorial_colab.html">Using Google Colab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../TechnicalHelp/Tutorial_kaggle.html">Using Kaggle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../TechnicalHelp/Discord.html">Using discord</a></li>
</ul>
</li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../TechnicalHelp/Links_Policy.html">Quick links and policies</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../prereqs/ClimateScience.html">Prerequisites and preparatory materials for Computational Tools for Climate Science</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Fundamentals</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/chapter_title.html">Climate System Overview (W1D1)</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Intro.html">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial1.html">Tutorial 1: Creating DataArrays and Datasets to Assess Global Climate Data</a></li>








<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial2.html">Tutorial 2: Selection, Interpolation and Slicing</a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial3.html">Tutorial 3: Opening and Plotting netCDF Data</a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial4.html">Tutorial 4: Arithmetic and Aggregation Methods</a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial5.html">Tutorial 5: Xarray Data Analysis and Climatology</a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial6.html">Tutorial 6: Compute and Plot Temperature Anomalies</a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial7.html">Tutorial 7: Other Computational Tools in Xarray</a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial8.html">Tutorial 8: Masking with One Condition</a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Tutorial9.html">Tutorial 9: Masking with Multiple Conditions</a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_Outro.html">Outro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../W1D1_ClimateSystemOverview/student/W1D1_DaySummary.html">Day Summary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Projects_GoodResearchPractices/chapter_title.html">Good Research Practices (Projects)</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Intro.html">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial1.html">Tutorial 1: Finding a Phenomenon and Asking a Question About It</a></li>



<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial2.html">Tutorial 2: Doing a Literature Review</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial3.html">Tutorial 3: Identifying the Basic Ingredients</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial4.html">Tutorial 4: Formulating a Hypothesis</a></li>




<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial5.html">Tutorial 5: Drafting the Analysis</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial6.html">Tutorial 6: Implementing the Analysis</a></li>



<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial7.html">Tutorial 7: Interpreting the Results</a></li>




<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Tutorial8.html">Tutorial 8: Communicating Your Conclusions</a></li>



<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_Outro.html">Outro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Projects_GoodResearchPractices/student/Projects_DaySummary.html">Day Summary</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Climate Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/chapter_title.html">State of the Climate Ocean and Atmosphere Reanalysis (W1D2)</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Intro.html">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Tutorial1.html">Tutorial 1: Calculating ENSO with Xarray</a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Tutorial2.html"><strong>Tutorial 2: A Lot of Weather Makes Climate - Exploring the ERA5 Reanalysis</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Tutorial3.html">Tutorial 3: Atmospheric  Circulation</a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Tutorial4.html">Tutorial 4: Oceanic Wind-driven Circulation</a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Tutorial5.html">Tutorial 5: Thermohaline Circulation</a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Tutorial6.html">Tutorial 6: Ocean Heat Content</a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_Outro.html">Outro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/student/W1D2_DaySummary.html">Day Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../W1D2_StateoftheClimateOceanandAtmosphereReanalysis/further_reading.html">Suggested Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/chapter_title.html">Remote Sensing Land Ocean and Atmosphere (W1D3)</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial1.html"><strong>Tutorial 1: Introduction to Remote Sensing</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial2.html"><strong>Tutorial 2: Exploring Satellite Climate Data Records</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial3.html"><strong>Tutorial 3: Visualizing Satellite CDR - Global Vegetation Mapping</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial4.html"><strong>Tutorial 4: Understanding Climatology Through Precipitation Data</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial5.html"><strong>Tutorial 5: Calculating Anomalies Using Precipitation Data</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial6.html"><strong>Tutorial 6: Large Scale Climate Variability - ENSO</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial7.html"><strong>Tutorial 7: Impact of Climate Variability - Precipitation</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/student/W1D3_Tutorial8.html"><strong>Tutorial 8: Comparing Satellite Products With In Situ Data</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D3_RemoteSensingLandOceanandAtmosphere/further_reading.html">Suggested Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W1D4_Paleoclimate/chapter_title.html">Paleoclimate (W1D4)</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial1.html"><strong>Tutorial 1: Paleoclimate Proxies</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial2.html"><strong>Tutorial 2: Reconstructing Past Changes in Ocean Climate</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial3.html"><strong>Tutorial 3: Reconstructing Past Changes in Terrestrial Climate</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial4.html"><strong>Tutorial 4: Reconstructing Past Changes in Atmospheric Climate</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial5.html"><strong>Tutorial 5: Paleoclimate Data Analysis Tools</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial6.html"><strong>Tutorial 6: Spectral Analysis of Paleoclimate Data</strong></a></li>








<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial7.html"><strong>Tutorial 7: Assessing Climate Forcings</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial8.html"><strong>Tutorial 8: Paleoclimate Models</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/student/W1D4_Tutorial9.html"><strong>Tutorial 9: Paleoclimate Reanalysis Products</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D4_Paleoclimate/further_reading.html">Suggested Further Reading</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Climate Future</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W1D5_ClimateModeling/chapter_title.html">Climate Modeling (W1D5)</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/student/W1D5_Tutorial1.html"><strong>Tutorial 1 : A Simple Greenhouse Model</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/student/W1D5_Tutorial2.html"><strong>Tutorial 2 : Energy Balance</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/student/W1D5_Tutorial3.html"><strong>Tutorial 3 : A Zero-Dimensional Energy Balance Model</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/student/W1D5_Tutorial4.html"><strong>Tutorial 4: Climate Feedbacks</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/student/W1D5_Tutorial5.html"><strong>Tutorial 5: Radiative Equilibrium</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/student/W1D5_Tutorial6.html"><strong>Tutorial 6: Radiative Convective Equilibrium</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/student/W1D5_Tutorial7.html"><strong>Tutorial 7: Introduction to Earth System Models</strong></a></li>








<li class="toctree-l2"><a class="reference internal" href="../../W1D5_ClimateModeling/further_reading.html">Suggested Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/chapter_title.html">Future Climate - IPCC I Physical Basis (W2D1)</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/student/W2D1_Tutorial1.html"><strong>Tutorial 1: Creating Maps of CMIP6 Earth System Model (ESM) Projections</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/student/W2D1_Tutorial2.html"><strong>Tutorial 2: Time Series, Global Averages, and Scenario Comparison</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/student/W2D1_Tutorial3.html"><strong>Tutorial 3: Multi-model Ensembles</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/student/W2D1_Tutorial4.html"><strong>Tutorial 4: Quantifying Uncertainty in Projections</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/student/W2D1_Tutorial5.html"><strong>Tutorial 5: Internal Climate Variability</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/student/W2D1_Tutorial6.html"><strong>Tutorial 6: Synthesising &amp; Interpreting Diverse Data Sources</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../W2D1_FutureClimate-IPCCIPhysicalBasis/further_reading.html">Suggested Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W2D3_FutureClimate-IPCCII%26IIISocio-EconomicBasis/chapter_title.html">Future Climate - IPCC II &amp; III Socio-Economic Basis (W2D3)</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W2D3_FutureClimate-IPCCII%26IIISocio-EconomicBasis/student/W2D3_Tutorial1.html"><strong>Tutorial 1:</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W2D3_FutureClimate-IPCCII%26IIISocio-EconomicBasis/student/W2D3_Tutorial2.html"><strong>Tutorial 2: Transition Goals and Integrated Assessment Models</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="../../W2D3_FutureClimate-IPCCII%26IIISocio-EconomicBasis/student/W2D3_Tutorial3.html"><strong>Tutorial 3: IAMs and SSPs</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../W2D3_FutureClimate-IPCCII%26IIISocio-EconomicBasis/student/W2D3_Tutorial4.html"><strong>Tutorial 4: Public Opinion on the Climate Emergency and Why it Matters</strong></a></li>









<li class="toctree-l2"><a class="reference internal" href="../../W2D3_FutureClimate-IPCCII%26IIISocio-EconomicBasis/further_reading.html"><strong>Tutorial 2 Further Reading</strong></a></li>

</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Climate Response</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/chapter_title.html">Climate Response - Extremes &amp; Variability (W2D4)</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial1.html"><strong>Tutorial 1: Distributions</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial2.html"><strong>Tutorial 2: What is an Extreme Event? Empirical Return Levels</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial3.html"><strong>Tutorial 3: Extreme Value Analysis - the GEV Distribution</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial4.html"><strong>Tutorial 4: Return Levels Using Normal and GEV Distributions</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial5.html"><strong>Tutorial 5: Non-stationarity in Historical Records</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial6.html"><strong>Tutorial 6: Scenario-dependence of Future Changes in Extremes</strong></a></li>









<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial7.html"><strong>Tutorial 7: Non-Stationarity in the EVT-framework</strong></a></li>





<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/student/W2D4_Tutorial8.html"><strong>Tutorial 8: Thresholds</strong></a></li>






<li class="toctree-l2"><a class="reference internal" href="../../W2D4_ClimateResponse-Extremes%26Variability/further_reading.html">Suggested Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../chapter_title.html">Climate Response - Adaptation Impact (W2D5)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="W2D5_Tutorial1.html"><strong>Tutorial 1: Linear and Logistic Regression</strong></a></li>





<li class="toctree-l2 current active"><a class="current reference internal" href="#"><strong>Tutorial 2:  Regression and Decision Trees on the Dengue Fever Dataset</strong></a></li>








<li class="toctree-l2"><a class="reference internal" href="W2D5_Tutorial3.html"><strong>Tutorial 3:  Logistic Regression and ANN on the Remote Sensing Crop Dataset</strong></a></li>







<li class="toctree-l2"><a class="reference internal" href="W2D5_Tutorial4.html"><strong>Tutorial 4:  Exploring other applications</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../further_reading.html">Suggested Further Reading</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Project Booklet</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../projects/README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/docs/project_guidance.html">Daily guide for projects</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../projects/docs/datasets_overview.html">Project materials</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../projects/project-notebooks/Sea_level_rise.html"><strong>Sea Level Rise</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../../projects/project-notebooks/Ocean_acidification.html"><strong>Ocean Acidification</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../../projects/project-notebooks/ENSO_impact_on_precipitation_and_temperature.html"><strong>The Impact of ENSO on Precipitation and Temperature</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../../projects/project-notebooks/Regional_precipitation_variability.html">Regional Precipitation Variability and Extreme Events</a></li>




<li class="toctree-l2"><a class="reference internal" href="../../../projects/project-notebooks/Heatwaves.html"><strong>Heatwaves: Assessing the Dynamic Interactions of the Atmosphere and Land</strong></a></li>




<li class="toctree-l2"><a class="reference internal" href="../../../projects/project-notebooks/Wildfires_and_burnt_areas.html"><strong>Monitoring and Mapping Wildfires Using Satellite Data</strong></a></li>



<li class="toctree-l2"><a class="reference internal" href="../../../projects/project-notebooks/Surface_albedo_and_land_cover.html">Changes in Land Cover: Albedo and Carbon Sequestration</a></li>




</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/docs/continuing_your_project_after_the_course.html">Continuing your project after the course</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Professional Development</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../projects/professional_development/README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/professional_development/impact_talks.html">Impact Talks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/professional_development/mentors.html">Mentor Meetings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/professional_development/career_features.html">Career Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/professional_development/career_panels.html">Career Panels</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://climatematch.2i2c.cloud/hub/user-redirect/git-pull?repo=https%3A//github.com/ClimatematchAcademy/course-content&urlpath=lab/tree/course-content/book/tutorials/W2D5_ClimateResponse-AdaptationImpact/student/W2D5_Tutorial2.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ClimatematchAcademy/course-content" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ClimatematchAcademy/course-content/issues/new?title=Issue%20on%20page%20%2Ftutorials/W2D5_ClimateResponse-AdaptationImpact/student/W2D5_Tutorial2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/tutorials/W2D5_ClimateResponse-AdaptationImpact/student/W2D5_Tutorial2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial 2:  Regression and Decision Trees on the Dengue Fever Dataset</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><strong>Tutorial 2:  Regression and Decision Trees on the Dengue Fever Dataset</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tutorial-objectives"><strong>Tutorial Objectives</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setup"><strong>Setup</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#figure-settings">Figure Settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-1-speaker-introduction">Video 1: Speaker Introduction</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-loading-and-exploring-dengue-fever-data-set"><strong>Section 1: Loading and Exploring Dengue Fever Data Set</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-1-loading-the-environmental-data"><strong>Section 1.1:  Loading the Environmental Data</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-2-explore-the-dataset"><strong>Section 1.2:  Explore the Dataset</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-3-visualize-the-data"><strong>Section 1.3: Visualize the Data</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-exercise-1-1">Coding Exercise 1.1</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-4-load-and-visualize-the-corresponding-weekly-dengue-fever-cases"><strong>Section 1.4: Load and Visualize the Corresponding Weekly Dengue Fever Cases</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-5-visualize-the-weekly-dengue-fever-cases"><strong>Section 1.5: Visualize the Weekly Dengue Fever Cases</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-exercises-1-5">Coding Exercises 1.5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-1-5">Questions 1.5</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-regression-on-dengue-fever-dataset"><strong>Section 2 : Regression on Dengue Fever Dataset</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-1-data-preprocessing"><strong>Section 2.1: Data Preprocessing</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-2-fitting-model-and-analyzing-results"><strong>Section 2.2: Fitting Model and Analyzing Results</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-exercise-2-2-implement-regression-on-dengue-fever-dataset-and-evaluate-the-performance">Coding Exercise 2.2: Implement Regression on Dengue Fever Dataset and Evaluate the Performance</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-2-2"><strong>Questions 2.2</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bonus-section-2-3-handling-different-scenarios"><strong>(Bonus) Section 2.3 : Handling Different Scenarios</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-3-1-handling-categorical-regressors"><strong>Section 2.3.1: Handling Categorical Regressors</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-3-2-handling-integer-valued-dependent-variables"><strong>Section 2.3.2 : Handling Integer Valued Dependent Variables</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-2-3-performance-of-the-model"><strong>Question 2.3: Performance of the Model</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-decision-trees"><strong>Section 3: Decision Trees</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-1-fitting-model-and-analyzing-results"><strong>Section 3.1: Fitting Model and Analyzing Results</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-3-1-reflecting-on-the-performance">Question 3.1: Reflecting on the Performance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-2-looking-at-feature-importance"><strong>Section 3.2: Looking at Feature Importance</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-3-2-climate-connection"><strong>Question 3.2: Climate Connection</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bonus-section-3-3-comparing-feature-importance-methods"><strong>(Bonus) Section 3.3: Comparing Feature Importance Methods</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-3-3-climate-connection"><strong>Question 3.3: Climate Connection</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary"><strong>Summary</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#extra-exercises-or-project-ideas">Extra Exercises or Project Ideas</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#resources"><strong>Resources</strong></a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <p><a class="reference external" href="https://colab.research.google.com/github/ClimateMatchAcademy/course-content/blob/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/W2D5_Tutorial2.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a>   <a href="https://kaggle.com/kernels/welcome?src=https://raw.githubusercontent.com/{ORG}/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/W2D5_Tutorial2.ipynb" target="_blank"><img alt="Open in Kaggle" src="https://kaggle.com/static/images/open-in-kaggle.svg" /></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="tutorial-2-regression-and-decision-trees-on-the-dengue-fever-dataset">
<h1><strong>Tutorial 2:  Regression and Decision Trees on the Dengue Fever Dataset</strong><a class="headerlink" href="#tutorial-2-regression-and-decision-trees-on-the-dengue-fever-dataset" title="Permalink to this heading">#</a></h1>
<p><strong>Week 2, Day 5: Adaptation and Impact</strong></p>
<p><strong>Content creators:</strong> Deepak Mewada, Grace Lindsay</p>
<p><strong>Content reviewers:</strong> Dionessa Biton, Younkap Nina Duplex, Sloane Garelick, Zahra Khodakaramimaghsoud, Peter Ohue, Jenna Pearson, Derick Temfack, Peizhen Yang, Cheng Zhang, Chi Zhang, Ohad Zivan</p>
<p><strong>Content editors:</strong> Jenna Pearson, Chi Zhang, Ohad Zivan</p>
<p><strong>Production editors:</strong> Wesley Banfield, Jenna Pearson, Chi Zhang, Ohad Zivan</p>
<p><strong>Our 2023 Sponsors:</strong> NASA TOPS and Google DeepMind</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="tutorial-objectives">
<h1><strong>Tutorial Objectives</strong><a class="headerlink" href="#tutorial-objectives" title="Permalink to this heading">#</a></h1>
<p>Welcome to tutorial 2 of a series focused on understanding the role of data science and machine learning in addressing the impact of climate change and adapting to it.</p>
<p>In this tutorial, we will explore a dataset that relates weather variables to dengue fever cases. By the end of the tutorial, you will be able to:</p>
<ul class="simple">
<li><p>Load the data into pandas dataframes and visualize it to see obvious trends.</p></li>
<li><p>Apply linear regression to the Dengue dataset: clean the data, implement linear regression using scikit-learn, and evaluate its performance. This will include handling categorical data using dummy variables and using scikit-learn’s Poisson GLM method to handle integer-valued data.</p></li>
<li><p>Apply additional methods to the Dengue Fever dataset, including implementing Random Forest Regression, discussing and analyzing its performance, and measuring feature importance.</p></li>
</ul>
<p>This tutorial will provide you with practical experience in working with real-world datasets and implementing different regression techniques.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setup">
<h1><strong>Setup</strong><a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># imports</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>  <span class="c1"># import the numpy library as np</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">LinearRegression</span><span class="p">,</span>
<span class="p">)</span>  <span class="c1"># import the LinearRegression class from the sklearn.linear_model module</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>  <span class="c1"># import the pyplot module from the matplotlib library</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>  <span class="c1"># import the pandas library and the drive function from the google.colab module</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_absolute_error</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.inspection</span> <span class="kn">import</span> <span class="n">permutation_importance</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">PoissonRegressor</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cm</span>
<span class="kn">import</span> <span class="nn">pooch</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># imports</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>  <span class="c1"># import the numpy library as np</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">LinearRegression</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="p">)</span>  <span class="c1"># import the LinearRegression class from the sklearn.linear_model module</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>  <span class="c1"># import the pyplot module from the matplotlib library</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;numpy&#39;
</pre></div>
</div>
</div>
</div>
<section id="figure-settings">
<h2>Figure Settings<a class="headerlink" href="#figure-settings" title="Permalink to this heading">#</a></h2>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># @title Figure Settings</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>  <span class="c1"># interactive display</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span>
    <span class="s2">&quot;https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/cma.mplstyle&quot;</span>
<span class="p">)</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># @title Figure Settings</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>  <span class="c1"># interactive display</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="s2">&quot;https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/cma.mplstyle&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">run_line_magic</span><span class="p">(</span><span class="s1">&#39;matplotlib&#39;</span><span class="p">,</span> <span class="s1">&#39;inline&#39;</span><span class="p">)</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;ipywidgets&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="video-1-speaker-introduction">
<h2>Video 1: Speaker Introduction<a class="headerlink" href="#video-1-speaker-introduction" title="Permalink to this heading">#</a></h2>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># @title Video 1: Speaker Introduction</span>
<span class="c1"># Tech team will add code to format and display the video</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># helper functions</span>


<span class="k">def</span> <span class="nf">pooch_load</span><span class="p">(</span><span class="n">filelocation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">processor</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">shared_location</span> <span class="o">=</span> <span class="s2">&quot;/home/jovyan/shared/Data/tutorials/W2D5_ClimateResponse-AdaptationImpact&quot;</span>  <span class="c1"># this is different for each day</span>
    <span class="n">user_temp_cache</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">shared_location</span><span class="p">,</span> <span class="n">filename</span><span class="p">)):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">shared_location</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">pooch</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>
            <span class="n">filelocation</span><span class="p">,</span>
            <span class="n">known_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">fname</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_temp_cache</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
            <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">file</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="section-1-loading-and-exploring-dengue-fever-data-set">
<h1><strong>Section 1: Loading and Exploring Dengue Fever Data Set</strong><a class="headerlink" href="#section-1-loading-and-exploring-dengue-fever-data-set" title="Permalink to this heading">#</a></h1>
<section id="section-1-1-loading-the-environmental-data">
<h2><strong>Section 1.1:  Loading the Environmental Data</strong><a class="headerlink" href="#section-1-1-loading-the-environmental-data" title="Permalink to this heading">#</a></h2>
<p>As discussed in the video, we are working with a <a class="reference external" href="https://www.drivendata.org/competitions/44/dengai-predicting-disease-spread/page/81/">data set</a> provided by <a class="reference external" href="https://arxiv.org/abs/1606.07781">DrivenData</a> that centers on the goal of predicting dengue fever cases based on environmental variables.</p>
<p>We will use pandas to interface with the data, which is shared in the .csv format. First, let’s load the environmental data into a pandas dataframe and print its contents</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># loading a CSV file named &#39;dengue_features_train(1).csv&#39; into a pandas DataFrame named &#39;df&#39;</span>
<span class="n">filename_dengue</span> <span class="o">=</span> <span class="s2">&quot;dengue_features_train.csv&quot;</span>
<span class="n">url_dengue</span> <span class="o">=</span> <span class="s2">&quot;https://osf.io/wm9un/download/&quot;</span>

<span class="n">df_features</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">pooch_load</span><span class="p">(</span><span class="n">url_dengue</span><span class="p">,</span> <span class="n">filename_dengue</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">5</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">filename_dengue</span> <span class="o">=</span> <span class="s2">&quot;dengue_features_train.csv&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">url_dengue</span> <span class="o">=</span> <span class="s2">&quot;https://osf.io/wm9un/download/&quot;</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">df_features</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">pooch_load</span><span class="p">(</span><span class="n">url_dengue</span><span class="p">,</span> <span class="n">filename_dengue</span><span class="p">))</span>

<span class="ne">NameError</span>: name &#39;pd&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="section-1-2-explore-the-dataset">
<h2><strong>Section 1.2:  Explore the Dataset</strong><a class="headerlink" href="#section-1-2-explore-the-dataset" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># displaying the contents of the DataFrame named &#39;df&#39;.</span>
<span class="c1"># this is useful for verifying that the data was read correctly.</span>
<span class="n">df_features</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># displaying the contents of the DataFrame named &#39;df&#39;.</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="c1"># this is useful for verifying that the data was read correctly.</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">df_features</span>

<span class="ne">NameError</span>: name &#39;df_features&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>We can see some of the variables discussed in the video. For full documentation of these features, see the associated description <a class="reference external" href="https://www.drivendata.org/competitions/44/dengai-predicting-disease-spread/page/82/">here</a>.</p>
<p>In climate science, visualizing data is an important step in understanding patterns and trends in environmental data. It can also help identify outliers and inconsistencies that need to be addressed before modeling. Therefore, in the next subsection, we will visualize the climate and environmental data to gain insights and identify potential issues.</p>
</section>
<section id="section-1-3-visualize-the-data">
<h2><strong>Section 1.3: Visualize the Data</strong><a class="headerlink" href="#section-1-3-visualize-the-data" title="Permalink to this heading">#</a></h2>
<section id="coding-exercise-1-1">
<h3>Coding Exercise 1.1<a class="headerlink" href="#coding-exercise-1-1" title="Permalink to this heading">#</a></h3>
<p>For this exercise, you will visualize the data. Use the provided hints for the function name if needed.</p>
<ol class="arabic simple">
<li><p>Use pandas to plot histograms of these features using .hist() function</p></li>
<li><p>Use the .isnull() function to see if there is any missing data.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display a histogram of the Pandas DataFrame &#39;df&#39;</span>
<span class="c1"># df_features.hist(...)</span>

<span class="c1"># output the sum of null values for each column in &#39;df&#39;</span>
<span class="n">df_features</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">line</span> <span class="mi">5</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># display a histogram of the Pandas DataFrame &#39;df&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="c1"># df_features.hist(...)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> 
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># output the sum of null values for each column in &#39;df&#39;</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">df_features</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;df_features&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_6b18c134.py"><em>Click for solution</em></a></p>
<p>The above histograms show the number of data points that have the value given on the x-axis. As we can see, there is some missing data as well, particularly some of the Normalized Difference Vegetation Index (NDVI) measures. So far we have only been looking at the environmental data. Let’s load the corresponding weekly dengue fever cases as well.</p>
</section>
</section>
<section id="section-1-4-load-and-visualize-the-corresponding-weekly-dengue-fever-cases">
<h2><strong>Section 1.4: Load and Visualize the Corresponding Weekly Dengue Fever Cases</strong><a class="headerlink" href="#section-1-4-load-and-visualize-the-corresponding-weekly-dengue-fever-cases" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># reading a CSV file named &quot;dengue_labels_train.csv&quot; and saving the data into a pandas DataFrame named &quot;df_dengue&quot;.</span>
<span class="n">filename_dengue_labels</span> <span class="o">=</span> <span class="s2">&quot;dengue_labels_train.csv&quot;</span>
<span class="n">url_dengue_labels</span> <span class="o">=</span> <span class="s2">&quot;https://osf.io/6nw9x/download&quot;</span>

<span class="n">df_labels</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">pooch_load</span><span class="p">(</span><span class="n">url_dengue_labels</span><span class="p">,</span> <span class="n">filename_dengue_labels</span><span class="p">))</span>

<span class="c1"># displaying the contents of the DataFrame named &quot;df_dengue&quot;.</span>
<span class="c1"># This is useful for verifying that the data was read correctly.</span>
<span class="n">df_labels</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">5</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">filename_dengue_labels</span> <span class="o">=</span> <span class="s2">&quot;dengue_labels_train.csv&quot;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">url_dengue_labels</span> <span class="o">=</span> <span class="s2">&quot;https://osf.io/6nw9x/download&quot;</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">df_labels</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">pooch_load</span><span class="p">(</span><span class="n">url_dengue_labels</span><span class="p">,</span> <span class="n">filename_dengue_labels</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="c1"># displaying the contents of the DataFrame named &quot;df_dengue&quot;.</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="c1"># This is useful for verifying that the data was read correctly.</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="n">df_labels</span>

<span class="ne">NameError</span>: name &#39;pd&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="section-1-5-visualize-the-weekly-dengue-fever-cases">
<h2><strong>Section 1.5: Visualize the Weekly Dengue Fever Cases</strong><a class="headerlink" href="#section-1-5-visualize-the-weekly-dengue-fever-cases" title="Permalink to this heading">#</a></h2>
<section id="coding-exercises-1-5">
<h3>Coding Exercises 1.5<a class="headerlink" href="#coding-exercises-1-5" title="Permalink to this heading">#</a></h3>
<p>For the following exercises visualise the data. You will start with plotting a histogram of the case numbers.</p>
<ol class="arabic simple">
<li><p>Plot a histogram of the case numbers using 30 bins (bins = 30).</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display a histogram of the &#39;total_cases&#39; column in the &#39;df_dengue&#39; DataFrame</span>
<span class="n">_</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_b0d2faa1.py"><em>Click for solution</em></a></p>
<p><em>Example output:</em></p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_b0d2faa1_0.png"><img alt="Solution hint" class="align-left" src="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_b0d2faa1_0.png" style="width: 775.0px; height: 575.0px;" /></a>
<ol class="arabic simple" start="2">
<li><p>Plot total cases as a function of year</p></li>
<li><p>Plot total cases as a function of the week of the year</p></li>
<li><p>Plot total cases as two separate histograms, one for each of the cities with 30 bins.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># creating a scatter plot of &#39;year&#39; vs &#39;total_cases&#39; in the DataFrame &#39;df_dengue&#39;.</span>
<span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># creating a scatter plot of &#39;weekofyear&#39; vs &#39;total_cases&#39; in the DataFrame &#39;df_dengue&#39;.</span>
<span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># creating a new DataFrame named &#39;new&#39; that contains only the columns &#39;total_cases&#39; and &#39;city&#39; from &#39;df_dengue&#39;.</span>
<span class="n">new</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># creating histograms of the &#39;total_cases&#39; column in &#39;new&#39; separated by the values in the &#39;city&#39; column.</span>
<span class="n">new</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_d3785c15.py"><em>Click for solution</em></a></p>
<p><em>Example output:</em></p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_d3785c15_1.png"><img alt="Solution hint" class="align-left" src="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_d3785c15_1.png" style="width: 775.0px; height: 575.0px;" /></a>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_d3785c15_2.png"><img alt="Solution hint" class="align-left" src="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_d3785c15_2.png" style="width: 775.0px; height: 575.0px;" /></a>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_d3785c15_3.png"><img alt="Solution hint" class="align-left" src="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_d3785c15_3.png" style="width: 775.0px; height: 575.0px;" /></a>
</section>
<section id="questions-1-5">
<h3>Questions 1.5<a class="headerlink" href="#questions-1-5" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Delve deeper into the data. What trends do you observe?
Engage in a discussion with your group and see if anyone has noticed a trend that you may have missed.</p></li>
</ol>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_23f1a729.py"><em>Click for solution</em></a></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="section-2-regression-on-dengue-fever-dataset">
<h1><strong>Section 2 : Regression on Dengue Fever Dataset</strong><a class="headerlink" href="#section-2-regression-on-dengue-fever-dataset" title="Permalink to this heading">#</a></h1>
<p>In the previous section, we explored the Dengue dataset. In this section, we will apply linear regression to this dataset.</p>
<p>Since we have already explored and visualized the dataset we are ready to train a model.</p>
<p>We will start by preprocessing the data and defining a model to predict cases of dengue fever.</p>
<p>In the case of predicting dengue fever the environmental variables are the independent variables (or regressors), while number of dengue fever cases is the dependent variable that we want to predict.</p>
<section id="section-2-1-data-preprocessing">
<h2><strong>Section 2.1: Data Preprocessing</strong><a class="headerlink" href="#section-2-1-data-preprocessing" title="Permalink to this heading">#</a></h2>
<p>In climate science, data is often incomplete or missing, and it’s important to handle such missing values before using the data for prediction or analysis. There are <a class="reference external" href="https://towardsdatascience.com/7-ways-to-handle-missing-values-in-machine-learning-1a6326adf79e">many ways</a> to do this. In our case, we will remove the missing values as well as columns of data we won’t be using in the predictive model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># data cleaning</span>

<span class="c1"># drop columns &#39;city&#39;, &#39;year&#39;, and &#39;week_start_date&#39; from the &#39;df&#39; dataframe to create a new dataframe &#39;df_cleaned&#39;</span>
<span class="n">df_cleaned</span> <span class="o">=</span> <span class="n">df_features</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;city&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;week_start_date&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># check for null and missing values</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Null and missing value before cleaning&quot;</span><span class="p">,</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># data cleaning</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> 
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="c1"># drop columns &#39;city&#39;, &#39;year&#39;, and &#39;week_start_date&#39; from the &#39;df&#39; dataframe to create a new dataframe &#39;df_cleaned&#39;</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">df_cleaned</span> <span class="o">=</span> <span class="n">df_features</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;city&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;week_start_date&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="c1"># check for null and missing values</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Null and missing value before cleaning&quot;</span><span class="p">,</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

<span class="ne">NameError</span>: name &#39;df_features&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove missing values (NaN). there are works in the scientific literature on how to fill the missing gaps.</span>
<span class="c1"># the safest method is to just remove the missing values for now.</span>
<span class="n">df_cleaned</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># check for null and missing values after removing</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># remove missing values (NaN). there are works in the scientific literature on how to fill the missing gaps.</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="c1"># the safest method is to just remove the missing values for now.</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">df_cleaned</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="c1"># check for null and missing values after removing</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="nb">print</span><span class="p">(</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

<span class="ne">NameError</span>: name &#39;df_cleaned&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_cleaned</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df_cleaned</span>

<span class="ne">NameError</span>: name &#39;df_cleaned&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Notice that the number of rows in the dataset has decreased from 1456 to 1199. We need to ensure that the dataset with dengue cases has the same rows dropped as we just did above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># use loc to select the relevant indexes</span>
<span class="n">df_labels</span> <span class="o">=</span> <span class="n">df_labels</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
<span class="n">df_labels</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># use loc to select the relevant indexes</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">df_labels</span> <span class="o">=</span> <span class="n">df_labels</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">df_labels</span>

<span class="ne">NameError</span>: name &#39;df_labels&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>To build a model with the climate data, we need to divide it into a training and test set to ensure that the model works well on held-out data. This is important because, as we have seen, evaluating the model on the exact data it was trained on can be misleading.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># train-test split</span>

<span class="c1"># select the &#39;total_cases&#39; column from the &#39;df_dengue&#39; dataframe and assign it to the variable &#39;cases&#39;</span>
<span class="n">cases</span> <span class="o">=</span> <span class="n">df_labels</span><span class="p">[</span><span class="s2">&quot;total_cases&quot;</span><span class="p">]</span>

<span class="c1"># create a boolean mask with random values for each element in &#39;cases&#39;</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span>
    <span class="mi">145</span>
<span class="p">)</span>  <span class="c1"># setting the random seed ensures we are all using the same train/test split</span>
<span class="n">mask</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cases</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mf">0.8</span>
<span class="p">)</span>  <span class="c1"># this will use 80% of the data to train and 20% to test</span>

<span class="c1"># create two new dataframes from the &#39;df_cleaned&#39; dataframe based on the boolean mask</span>
<span class="n">df_cleaned_train</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">df_cleaned_test</span> <span class="o">=</span> <span class="n">df_cleaned</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">]</span>

<span class="c1"># create two new arrays from the &#39;cases&#39; array based on the boolean mask</span>
<span class="n">cases_train</span> <span class="o">=</span> <span class="n">cases</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">cases_test</span> <span class="o">=</span> <span class="n">cases</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;80</span><span class="si">% o</span><span class="s2">f the data is split into the training set and remaining 20</span><span class="si">% i</span><span class="s2">nto the test set.&quot;</span>
<span class="p">)</span>

<span class="c1"># check that this is true</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;length of training data: &quot;</span><span class="p">,</span> <span class="n">df_cleaned_train</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;length of test data: &quot;</span><span class="p">,</span> <span class="n">df_cleaned_test</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">15</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># train-test split</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> 
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="c1"># select the &#39;total_cases&#39; column from the &#39;df_dengue&#39; dataframe and assign it to the variable &#39;cases&#39;</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">cases</span> <span class="o">=</span> <span class="n">df_labels</span><span class="p">[</span><span class="s2">&quot;total_cases&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="c1"># create a boolean mask with random values for each element in &#39;cases&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="mi">145</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="p">)</span>  <span class="c1"># setting the random seed ensures we are all using the same train/test split</span>

<span class="ne">NameError</span>: name &#39;df_labels&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="section-2-2-fitting-model-and-analyzing-results">
<h2><strong>Section 2.2: Fitting Model and Analyzing Results</strong><a class="headerlink" href="#section-2-2-fitting-model-and-analyzing-results" title="Permalink to this heading">#</a></h2>
<section id="coding-exercise-2-2-implement-regression-on-dengue-fever-dataset-and-evaluate-the-performance">
<h3>Coding Exercise 2.2: Implement Regression on Dengue Fever Dataset and Evaluate the Performance<a class="headerlink" href="#coding-exercise-2-2-implement-regression-on-dengue-fever-dataset-and-evaluate-the-performance" title="Permalink to this heading">#</a></h3>
<p>For this exercise, use what you learned in the previous tutorials to train a linear regression model on the training data and evaluate its performance. Evaluate its performance on the training data and the test data. Look specifically at the difference between predicted values and true values on the test set.</p>
<ol class="arabic simple">
<li><p>Train a linear regression model on the training data</p></li>
<li><p>Evaluate the performance of the model on both training and test data.</p></li>
<li><p>Look specifically at the difference between predicted values and true values on the test set.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a new instance of the LinearRegression class</span>
<span class="n">reg_model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>

<span class="c1"># train the model on the training data i.e on df_cleaned_train,cases_train</span>
<span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># print the R^2 score of the trained model on the training data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;r^2 on training data is: &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># print the R^2 score of the trained model on the test data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;r^2 on test data is: &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1"># create a scatter plot of the predicted values vs. the actual values for the test data</span>
<span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># add 1:1 line</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="s2">&quot;k-&quot;</span><span class="p">)</span>

<span class="c1"># add axis labels to the scatter plot</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Actual Number of Dengue Cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Predicted Number of Dengue Cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Predicted values vs. the actual values for the test data&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">16</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># create a new instance of the LinearRegression class</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">reg_model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># train the model on the training data i.e on df_cleaned_train,cases_train</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="ne">NameError</span>: name &#39;LinearRegression&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_ad3aca7f.py"><em>Click for solution</em></a></p>
<p><em>Example output:</em></p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_ad3aca7f_2.png"><img alt="Solution hint" class="align-left" src="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_ad3aca7f_2.png" style="width: 775.0px; height: 575.0px;" /></a>
<details>
<summary> <font color='orangered'>Click here description of plot  </font></summary>
<p>This code trains a linear regression model on a dataset and evaluates its performance on both the training and test data.</p>
<p>The scatter plot generated at the end of the code shows the predicted values vs. the actual values for the test data. Each point in the scatter plot represents a single data point in the test set. The horizontal axis represents the actual number of dengue cases, while the vertical axis represents the predicted number of dengue cases.</p>
<p>If the predicted values are close to the actual values, the scatter plot will show a diagonal line where the points cluster around. On the other hand, if the predicted values are far from the actual values, the scatter plot will be more spread out and may show a more random pattern of points.</p>
<p>By visually inspecting the scatter plot and looking at the r^2, we can get an idea of how well the model is performing and how accurate its predictions are. How well does the model do?</p>
</section>
<section id="questions-2-2">
<h3><strong>Questions 2.2</strong><a class="headerlink" href="#questions-2-2" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Discuss any surprising features of this plot related to model performance.</p></li>
</ol>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_bfc0d9c7.py"><em>Click for solution</em></a></p>
<p>We can also calculate some other metrics to assess model performance.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and mean squared error (MSE)</span>

<span class="n">y_pred</span> <span class="o">=</span> <span class="n">reg_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">17</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and mean squared error (MSE)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">y_pred</span> <span class="o">=</span> <span class="n">reg_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="ne">NameError</span>: name &#39;reg_model&#39; is not defined
</pre></div>
</div>
</div>
</div>
<details>
<summary> <font color='violet'>What is MAE and MSE   </font></summary>
In addition to r^2, Mean Absolute Error (MAE) and Mean Squared Error (MSE) are both metrics used to evaluate the performance of a regression model. They both measure the difference between the predicted values and the actual values of the target variable.
<p>The MAE is calculated by taking the average of the absolute differences between the predicted and actual values:</p>
<div class="amsmath math notranslate nohighlight" id="equation-59310e43-93ed-40fe-ae48-2d57261a9cdb">
<span class="eqno">(22)<a class="headerlink" href="#equation-59310e43-93ed-40fe-ae48-2d57261a9cdb" title="Permalink to this equation">#</a></span>\[\begin{align}
MAE = \frac{1}{n}\sum_{i=1}^{n}|y_i - \hat{y_i}|
\end{align}\]</div>
<p>where <span class="math notranslate nohighlight">\(n\)</span> is the number of samples, <span class="math notranslate nohighlight">\(y_i\)</span> is the actual value of the target variable for sample <span class="math notranslate nohighlight">\(i\)</span>, and <span class="math notranslate nohighlight">\(\hat{y}_i\)</span> is the predicted value of the target variable for sample <span class="math notranslate nohighlight">\(i\)</span>.</p>
<p>The RMSE is calculated by taking the square root of the average of the squared differences between the predicted and actual values:</p>
<div class="amsmath math notranslate nohighlight" id="equation-1abe008e-1c0d-4e8a-bd89-72e126d15db5">
<span class="eqno">(23)<a class="headerlink" href="#equation-1abe008e-1c0d-4e8a-bd89-72e126d15db5" title="Permalink to this equation">#</a></span>\[\begin{align}
 RMSE = \sqrt{\frac{1}{n}\sum_{i=1}^{n}(y_i - \hat{y_i})^2}
\end{align}\]</div>
<p>The main difference between MAE and RMSE is that RMSE gives more weight to larger errors, because the differences are squared. Therefore, if there are some large errors in the predictions, the RMSE will be higher than the MAE.</p>
<p>Both MAE and RMSE have the same unit of measurement as the target variable, and lower values indicate better model performance. However, the choice of which metric to use depends on the specific problem and the goals of the model.</p>
</section>
</section>
<section id="bonus-section-2-3-handling-different-scenarios">
<h2><strong>(Bonus) Section 2.3 : Handling Different Scenarios</strong><a class="headerlink" href="#bonus-section-2-3-handling-different-scenarios" title="Permalink to this heading">#</a></h2>
<section id="section-2-3-1-handling-categorical-regressors">
<h3><strong>Section 2.3.1: Handling Categorical Regressors</strong><a class="headerlink" href="#section-2-3-1-handling-categorical-regressors" title="Permalink to this heading">#</a></h3>
<p>We chose to remove city as a regressor because it is not a numerical value and therefore does not fit as easily into the linear regression framework. However, it is possible to include such categorical data. To do so, you need to turn the string variables representing cities into ‘dummy variables’, that is, numerical values that stand in for the categories. Here we can simply arbitrarily set one city to the value 0 and the other the value 1. See how including city impacts regression performance</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_cleaned_test</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">18</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df_cleaned_test</span>

<span class="ne">NameError</span>: name &#39;df_cleaned_test&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># include city as a regressor by creating dummy variables for the &#39;city&#39; column</span>
<span class="n">df_cleaned_city</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_features</span><span class="o">.</span><span class="n">dropna</span><span class="p">()[[</span><span class="s2">&quot;city&quot;</span><span class="p">]],</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># combine the cleaned data with the city dummy variables</span>
<span class="n">df_cleaned_combined</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_cleaned</span><span class="p">,</span> <span class="n">df_cleaned_city</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># split the data into training and test sets using a random mask</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">145</span><span class="p">)</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cases</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mf">0.8</span>
<span class="n">df_cleaned_city_train</span> <span class="o">=</span> <span class="n">df_cleaned_combined</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">df_cleaned_city_test</span> <span class="o">=</span> <span class="n">df_cleaned_combined</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">]</span>
<span class="n">cases_city_train</span> <span class="o">=</span> <span class="n">cases</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">cases_city_test</span> <span class="o">=</span> <span class="n">cases</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">]</span>

<span class="c1"># train a linear regression model with city as a regressor</span>
<span class="n">reg_model_city</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">reg_model_city</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_cleaned_city_train</span><span class="p">,</span> <span class="n">cases_city_train</span><span class="p">)</span>

<span class="c1"># print R-squared scores for the train and test sets</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;R-squared on training data is: &quot;</span><span class="p">,</span>
    <span class="n">reg_model_city</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">df_cleaned_city_train</span><span class="p">,</span> <span class="n">cases_city_train</span><span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;R-squared on test data is: &quot;</span><span class="p">,</span>
    <span class="n">reg_model_city</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">df_cleaned_city_test</span><span class="p">,</span> <span class="n">cases_city_test</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1"># create a scatter plot of the predicted values vs. the actual values for the test data</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">cases_city_test</span><span class="p">,</span> <span class="n">reg_model_city</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_city_test</span><span class="p">))</span>

<span class="c1"># add 1:1 line</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="s2">&quot;k-&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Actual number of dengue cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Predicted number of dengue cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Predicted vs Actual number of dengue cases (with city as a regressor)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">19</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># include city as a regressor by creating dummy variables for the &#39;city&#39; column</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">df_cleaned_city</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_features</span><span class="o">.</span><span class="n">dropna</span><span class="p">()[[</span><span class="s2">&quot;city&quot;</span><span class="p">]],</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># combine the cleaned data with the city dummy variables</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">df_cleaned_combined</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_cleaned</span><span class="p">,</span> <span class="n">df_cleaned_city</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;pd&#39; is not defined
</pre></div>
</div>
</div>
</div>
<details>
<summary> <font color='orangered'>Click here description of plot  </font></summary>
The plot generated is a scatter plot with the actual total cases on the x-axis and the predicted total cases on the y-axis. Each point on the plot represents a test data point. 
The accuracy of the model can also be evaluated numerically by computing metrics such as mean absolute error (MAE) and mean squared error (MSE), as well as the R-squared score.<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and root mean squared error (RMSE)</span>

<span class="n">y_pred_city</span> <span class="o">=</span> <span class="n">reg_model_city</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_city_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_city_test</span><span class="p">,</span> <span class="n">y_pred_city</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_city_test</span><span class="p">,</span> <span class="n">y_pred_city</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">20</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and root mean squared error (RMSE)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">y_pred_city</span> <span class="o">=</span> <span class="n">reg_model_city</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_city_test</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_city_test</span><span class="p">,</span> <span class="n">y_pred_city</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_city_test</span><span class="p">,</span> <span class="n">y_pred_city</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="ne">NameError</span>: name &#39;reg_model_city&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="section-2-3-2-handling-integer-valued-dependent-variables">
<h3><strong>Section 2.3.2 : Handling Integer Valued Dependent Variables</strong><a class="headerlink" href="#section-2-3-2-handling-integer-valued-dependent-variables" title="Permalink to this heading">#</a></h3>
<p>In our simulated data from the previous tutorial, the dependent variable was real-valued and followed a normal distribution. Here, the weekly case numbers are integers and are better described by a <a class="reference external" href="https://en.wikipedia.org/wiki/Poisson_distribution">Poisson distribution</a>. Therefore, plain linear regression is not actually the most appropriate approach for this data. Rather, we should use a generalized linear model, or GLM, which is like linear regression, but includes an extra step that makes it more suited to handle Poisson data and prevent negative case numbers. Try to use <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.PoissonRegressor.html">scikit-learn’s Poisson GLM method</a> on this data. Evaluate the performance of this model using the same metrics as above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create PoissonRegressor object</span>
<span class="n">poisson_reg</span> <span class="o">=</span> <span class="n">PoissonRegressor</span><span class="p">()</span>

<span class="c1"># fit the PoissonRegressor model with training data</span>
<span class="n">poisson_reg</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_cleaned_train</span><span class="p">,</span> <span class="n">cases_train</span><span class="p">)</span>

<span class="c1"># calculate r^2 score on training data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;r^2 on training data is: &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">poisson_reg</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">df_cleaned_train</span><span class="p">,</span> <span class="n">cases_train</span><span class="p">))</span>

<span class="c1"># calculate r^2 score on test data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;r^2 on test data is: &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">poisson_reg</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">,</span> <span class="n">cases_test</span><span class="p">))</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1"># plot predicted values against test data</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">poisson_reg</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">))</span>

<span class="c1"># add 1:1 line</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="s2">&quot;k-&quot;</span><span class="p">)</span>

<span class="c1"># add plot title and labels</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Predicted Cases vs Actual Cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Actual Cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Predicted Cases&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">21</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># create PoissonRegressor object</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">poisson_reg</span> <span class="o">=</span> <span class="n">PoissonRegressor</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># fit the PoissonRegressor model with training data</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">poisson_reg</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_cleaned_train</span><span class="p">,</span> <span class="n">cases_train</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;PoissonRegressor&#39; is not defined
</pre></div>
</div>
</div>
</div>
<details>
<summary> <font color='orangered'>Click here description of plot  </font></summary>
The plot generated is a scatter plot with the actual total cases on the x-axis and the predicted total cases on the y-axis. Each point on the plot represents a test data point.<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and root mean squared error (RMSE)</span>

<span class="n">y_pred</span> <span class="o">=</span> <span class="n">poisson_reg</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">22</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and root mean squared error (RMSE)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">y_pred</span> <span class="o">=</span> <span class="n">poisson_reg</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="ne">NameError</span>: name &#39;poisson_reg&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="question-2-3-performance-of-the-model">
<h3><strong>Question 2.3: Performance of the Model</strong><a class="headerlink" href="#question-2-3-performance-of-the-model" title="Permalink to this heading">#</a></h3>
<p>Engage in discussion with your pod to share your observations from the additional changes above.</p>
<ul class="simple">
<li><p>What did you observe?</p></li>
<li><p>Reflect on how different factors may affect the performance of the model.</p></li>
<li><p>Brainstorm as a group additional ways to improve the model’s performance.</p></li>
</ul>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_a235ae9b.py"><em>Click for solution</em></a></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="section-3-decision-trees">
<h1><strong>Section 3: Decision Trees</strong><a class="headerlink" href="#section-3-decision-trees" title="Permalink to this heading">#</a></h1>
<p>In the field of climate science, decision trees and random forests can be powerful tools for making predictions and analyzing complex data.</p>
<p>A decision tree is a type of model that is constructed by recursively splitting the data based on the values of the input features. Each internal node in the tree represents a decision based on the value of a feature, and each leaf node represents a prediction. Decision trees are easy to interpret and can capture complex, nonlinear relationships in the data.</p>
<p>Random forests are a type of ensemble model that combines multiple decision trees to make predictions. Each tree in the forest is trained on a random subset of the data, and the final prediction is the average of the predictions from all the trees. Random forests are particularly useful in climate science because they can handle high-dimensional data with many features and can capture both linear and nonlinear relationships.</p>
<p>By using decision trees and random forests, climate scientists can make accurate predictions about a variety of climate-related variables, such as temperature, precipitation, and sea-level rise. They can also gain insights into the complex relationships between different variables and identify important features that contribute to these relationships.</p>
<p>By training a Random Forest Model in this tutorial, we can better understand the relationship between climate variables and dengue fever cases, and potentially improve our ability to predict and prevent outbreaks.</p>
<section id="section-3-1-fitting-model-and-analyzing-results">
<h2><strong>Section 3.1: Fitting Model and Analyzing Results</strong><a class="headerlink" href="#section-3-1-fitting-model-and-analyzing-results" title="Permalink to this heading">#</a></h2>
<p>Next, you will train a random forest regression model using scikit-learn’s RandomForestRegressor class, with default hyperparameters. Use the documentation of the method <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html">here</a> to help you if needed. Evaluate the model’s performance on the training and test data and make a scatter plot of predicted vs actual cases for the test data.
Use <code class="docutils literal notranslate"><span class="pre">RandomForestRegressor()</span></code> which we already imported.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># train a random forest regression model</span>

<span class="c1"># use the RandomForestRegressor we imported earlier</span>
<span class="n">rf</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># run fit on &#39;df_cleaned_train&#39; and &#39;cases_train&#39;</span>
<span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># evaluate the model&#39;s performance on the training and testing data</span>
<span class="c1"># calculate accuracy by calling rf.score() on &#39;df_cleaned_train&#39; and &#39;cases_train&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R^2 on training data is: &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R^2 on test data is: &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1"># plot the predicted vs. actual total cases on the test data</span>
<span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># add 1:1 line</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="s2">&quot;k-&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Actual Total Cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Predicted Total Cases&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Random Forest Regression&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>R^2 on training data is: 
Ellipsis
R^2 on test data is: 
Ellipsis
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">23</span><span class="p">],</span> <span class="n">line</span> <span class="mi">17</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R^2 on test data is: &quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span> <span class="nb">print</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">17</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> <span class="c1"># plot the predicted vs. actual total cases on the test data</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span> <span class="n">_</span> <span class="o">=</span> <span class="o">...</span>

<span class="ne">NameError</span>: name &#39;plt&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_99fae6a7.py"><em>Click for solution</em></a></p>
<p><em>Example output:</em></p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_99fae6a7_2.png"><img alt="Solution hint" class="align-left" src="https://raw.githubusercontent.com/ClimateMatchAcademy/course-content/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/static/W2D5_Tutorial2_Solution_99fae6a7_2.png" style="width: 775.0px; height: 575.0px;" /></a>
<details>
<summary> <font color='orangered'>Click here description of plot  </font></summary>
The plot generated is a scatter plot with the actual total cases on the x-axis and the predicted total cases on the y-axis. Each point on the plot represents a test data point. <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and root mean squared error (MSE)</span>

<span class="n">y_pred</span> <span class="o">=</span> <span class="n">rf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">24</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># evaluating the performance of the model using metrics such as mean absolute error (MAE) and root mean squared error (MSE)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">y_pred</span> <span class="o">=</span> <span class="n">rf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">df_cleaned_test</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE:&quot;</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">cases_test</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="ne">AttributeError</span>: &#39;ellipsis&#39; object has no attribute &#39;predict&#39;
</pre></div>
</div>
</div>
</div>
<section id="question-3-1-reflecting-on-the-performance">
<h3>Question 3.1: Reflecting on the Performance<a class="headerlink" href="#question-3-1-reflecting-on-the-performance" title="Permalink to this heading">#</a></h3>
<p>Please think and discuss the following questions with your pod members:</p>
<ol class="arabic simple">
<li><p>How does the performance of the random forest model compare to that of the linear regression model?</p></li>
<li><p>How does the performance on the test data compare to the performance on the training data?</p></li>
<li><p>What could be the reason behind performing well on the training data but poorly on the test data? Hint: Look up ‘overfitting’</p></li>
</ol>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_be11cdf7.py"><em>Click for solution</em></a></p>
</section>
</section>
<section id="section-3-2-looking-at-feature-importance">
<h2><strong>Section 3.2: Looking at Feature Importance</strong><a class="headerlink" href="#section-3-2-looking-at-feature-importance" title="Permalink to this heading">#</a></h2>
<p>When we train a model to predict an outcome, it’s important to understand which inputs to the model are most important in driving that prediction. This is where ‘feature importance’ methods come in.</p>
<p>One way to measure feature importance is by using the permutation method. This involves randomly shuffling the values of a feature and testing the performance of the model with these permuted values. The amount that the model performance decreases when the feature’s values are permuted can provide an indication of how important it is.</p>
<p>For climate scientists, understanding feature importance can help identify key variables that contribute to predicting important outcomes, such as temperature or precipitation patterns.</p>
<p>Thankfully, Sci-kit learn has a method that implements permutation importance, and outputs a normalized measure of how much each feature impacts performance.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># execute this cell to enable the plotting function to be used for plotting performance of our model in next cell: `plot_feature_importance`</span>


<span class="k">def</span> <span class="nf">plot_feature_importance</span><span class="p">(</span><span class="n">perm_feat_imp</span><span class="p">):</span>
    <span class="c1"># increase the size of the plot for better readability</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

    <span class="c1"># plot the feature importance with error bars in navy blue color</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">columns</span><span class="p">)),</span>
        <span class="n">perm_feat_imp</span><span class="p">[</span><span class="s2">&quot;importances_mean&quot;</span><span class="p">],</span>
        <span class="n">perm_feat_imp</span><span class="p">[</span><span class="s2">&quot;importances_std&quot;</span><span class="p">],</span>
        <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span>
        <span class="n">capsize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;navy&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># set the x-axis and y-axis labels and title</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Features&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Importance&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Feature Importance Plot&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

    <span class="c1"># rotate the x-axis labels for better readability</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="c1"># add gridlines for better visualization</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>

    <span class="c1"># bar plot</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_cleaned</span><span class="o">.</span><span class="n">columns</span><span class="p">)),</span>
        <span class="n">perm_feat_imp</span><span class="p">[</span><span class="s2">&quot;importances_mean&quot;</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;navy&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the feature importance of each input to the model</span>

<span class="c1"># Use permutation_importance to calculate the feature importances of the trained random forest model</span>
<span class="c1"># df_cleaned_train contains the preprocessed training dataset, cases_train contains the actual number of dengue fever cases in the training dataset</span>
<span class="c1"># n_repeats specifies how many times the feature importances are calculated for each feature</span>
<span class="c1"># random_state is used to seed the random number generator for reproducibility</span>
<span class="n">perm_feat_imp</span> <span class="o">=</span> <span class="n">permutation_importance</span><span class="p">(</span>
    <span class="n">rf</span><span class="p">,</span> <span class="n">df_cleaned_train</span><span class="p">,</span> <span class="n">cases_train</span><span class="p">,</span> <span class="n">n_repeats</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>

<span class="c1"># Create a plot of the feature importances</span>
<span class="n">plot_feature_importance</span><span class="p">(</span><span class="n">perm_feat_imp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">26</span><span class="p">],</span> <span class="n">line</span> <span class="mi">7</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Plot the feature importance of each input to the model</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> 
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="c1"># Use permutation_importance to calculate the feature importances of the trained random forest model</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># df_cleaned_train contains the preprocessed training dataset, cases_train contains the actual number of dengue fever cases in the training dataset</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="c1"># n_repeats specifies how many times the feature importances are calculated for each feature</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="c1"># random_state is used to seed the random number generator for reproducibility</span>
<span class="ne">----&gt; </span><span class="mi">7</span> <span class="n">perm_feat_imp</span> <span class="o">=</span> <span class="n">permutation_importance</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="n">rf</span><span class="p">,</span> <span class="n">df_cleaned_train</span><span class="p">,</span> <span class="n">cases_train</span><span class="p">,</span> <span class="n">n_repeats</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="c1"># Create a plot of the feature importances</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> <span class="n">plot_feature_importance</span><span class="p">(</span><span class="n">perm_feat_imp</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;permutation_importance&#39; is not defined
</pre></div>
</div>
</div>
</div>
<details>
<summary> <font color='orangered'>Click here for description of plot </font></summary>
<p>The plot generated is a feature importance plot that provides insights into the importance of different features in predicting the target variable. Let’s break down the key elements and address the specific issues raised.</p>
<ol class="arabic simple">
<li><p>Feature Importance Representation:</p></li>
</ol>
<ul class="simple">
<li><p>Each bar in the plot represents a feature from the dataset.</p></li>
<li><p>The height of each bar represents the relative feature importance value.</p></li>
<li><p>Specifically, importance is measured as the decrease in performance that comes from permuting that feature.</p></li>
<li><p>Negative values typically indicate that the model performed better if the feature was removed.</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>Error Bars and Variability:</p></li>
</ol>
<ul class="simple">
<li><p>The error bars present around each feature’s bar represent the variability in importance values.</p></li>
<li><p>They indicate the uncertainty or variability in the importance estimates calculated through repeated permutations.</p></li>
<li><p>A longer error bar suggests higher variability, meaning the importance value for that feature may change significantly with different permutations.</p></li>
<li><p>Conversely, a shorter error bar indicates lower variability, indicating that the importance value is relatively stable and less influenced by random permutations.</p></li>
</ul>
<p>Understanding the feature importance plot empowers us to identify the most influential factors within our dataset. By recognizing these crucial features, we gain deeper insights into the underlying relationships within climate science data. This knowledge is invaluable for further analysis and informed decision-making processes within our field.</p>
<p>It’s important to note that the interpretation of feature importance can vary depending on the dataset and modeling technique employed. To gain a comprehensive understanding of feature importance analysis in the context of climate science, it is advisable to consult domain experts and explore additional resources tailored to your specific interests.</p>
<p>By delving into the world of feature importance, we unlock the potential to unravel the intricate dynamics of our climate science data and make meaningful contributions to this fascinating field of study.</p>
 </summary><section id="question-3-2-climate-connection">
<h3><strong>Question 3.2: Climate Connection</strong><a class="headerlink" href="#question-3-2-climate-connection" title="Permalink to this heading">#</a></h3>
<p>Please think and discuss the following questions with your pod members:</p>
<ol class="arabic simple">
<li><p>Which features were most important? Why do you suspect they would be?</p></li>
<li><p>Which features were not? Are there other variables not included here you think that would be more relevant than those that were deemed ‘not important’?</p></li>
</ol>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_3f7a4c8b.py"><em>Click for solution</em></a></p>
</section>
</section>
<section id="bonus-section-3-3-comparing-feature-importance-methods">
<h2><strong>(Bonus) Section 3.3: Comparing Feature Importance Methods</strong><a class="headerlink" href="#bonus-section-3-3-comparing-feature-importance-methods" title="Permalink to this heading">#</a></h2>
<p>The Random Forest Regression model also has a built-in estimation of feature importance. This estimation comes directly from how the decision trees are trained; specifically, it is a measure of how useful the feature is at splitting the data averaged across all nodes and trees. We can access these values directly from the trained model.</p>
<p>Different methods of estimating feature importance can come to different conclusions and may have different biases. Therefore, it is good to compare estimations across methods. How do these two methods compare?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set the figure size for better readability</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># create a bar chart of the feature importances returned by the random forest model</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rf</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">)),</span> <span class="n">rf</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;navy&quot;</span><span class="p">)</span>

<span class="c1"># set the x-axis and y-axis labels and title</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Features&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Importance&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Feature Importance Plot&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

<span class="c1"># rotate the x-axis labels for better readability</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="c1"># set the y-axis limit to better visualize the differences in feature importance</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">rf</span><span class="o">.</span><span class="n">feature_importances_</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">)</span>

<span class="c1"># add gridlines for better visualization</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">27</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># set the figure size for better readability</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="c1"># create a bar chart of the feature importances returned by the random forest model</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rf</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">)),</span> <span class="n">rf</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;navy&quot;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;plt&#39; is not defined
</pre></div>
</div>
</div>
</div>
<details>
<summary> <font color='orangered'>Click here for description of plot </font></summary>
<p>The bar chart displays the feature importances returned by the random forest model. Each bar represents the relative importance of each feature in predicting the number of dengue fever cases in the preprocessed dataset. The y-axis represents the importance of the features, while the x-axis displays the name of the features.</p>
<section id="question-3-3-climate-connection">
<h3><strong>Question 3.3: Climate Connection</strong><a class="headerlink" href="#question-3-3-climate-connection" title="Permalink to this heading">#</a></h3>
<p>Please think and discuss the following questions with your pod members:</p>
<ol class="arabic simple">
<li><p>How does this compare to the feature importance figure calculated using the permuation method above?</p></li>
<li><p>Do the differences agree more or less with your own expectations of which variables would be most important?</p></li>
</ol>
<p><a class="reference external" href="https://github.com/ClimateMatchAcademy/course-content/tree/main/tutorials/W2D5_ClimateResponse-AdaptationImpact/solutions/W2D5_Tutorial2_Solution_206442a1.py"><em>Click for solution</em></a></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="summary">
<h1><strong>Summary</strong><a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h1>
<p>In this tutorial, you explored various methods of analyzing the Dengue Fever dataset from a climate science perspective. You started by using pandas to handle the data and visualizing trends and anomalies. Next, you applied linear regression to model the data and handle categorical and integer-valued data. Finally, you applied random forest regression to improve the performance of the model and learned about feature importance. Overall, learners gained practical experience in using different modeling techniques to analyze and make predictions about real-world climate data.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="extra-exercises-or-project-ideas">
<h1>Extra Exercises or Project Ideas<a class="headerlink" href="#extra-exercises-or-project-ideas" title="Permalink to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Try experimenting with different hyperparameters for the random forest model, such as n_estimators, max_depth, and min_samples_leaf. How do these hyperparameters affect the performance of the model?</p></li>
<li><p>Try using a different machine learning algorithm to predict the number of Dengue fever cases, such as a support vector machine. How does the performance of these algorithms compare to the random forest model?</p></li>
<li><p>Try using a different dataset to predict the number of cases of a different disease or health condition. How does the preprocessing and modeling process differ for this dataset compared to the Dengue fever dataset?</p></li>
<li><p>Try visualizing the decision tree of the random forest model using the plot_tree function of the sklearn package. What insights can you gain from the visualization of the decision tree?</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="resources">
<h1><strong>Resources</strong><a class="headerlink" href="#resources" title="Permalink to this heading">#</a></h1>
<p>Data from this tutorial can be accessed <a class="reference external" href="https://www.drivendata.org/competitions/44/dengai-predicting-disease-spread/page/81/">here</a>.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./tutorials/W2D5_ClimateResponse-AdaptationImpact/student"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="W2D5_Tutorial1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><strong>Tutorial 1: Linear and Logistic Regression</strong></p>
      </div>
    </a>
    <a class="right-next"
       href="W2D5_Tutorial3.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><strong>Tutorial 3:  Logistic Regression and ANN on the Remote Sensing Crop Dataset</strong></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><strong>Tutorial 2:  Regression and Decision Trees on the Dengue Fever Dataset</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tutorial-objectives"><strong>Tutorial Objectives</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setup"><strong>Setup</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#figure-settings">Figure Settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-1-speaker-introduction">Video 1: Speaker Introduction</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-loading-and-exploring-dengue-fever-data-set"><strong>Section 1: Loading and Exploring Dengue Fever Data Set</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-1-loading-the-environmental-data"><strong>Section 1.1:  Loading the Environmental Data</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-2-explore-the-dataset"><strong>Section 1.2:  Explore the Dataset</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-3-visualize-the-data"><strong>Section 1.3: Visualize the Data</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-exercise-1-1">Coding Exercise 1.1</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-4-load-and-visualize-the-corresponding-weekly-dengue-fever-cases"><strong>Section 1.4: Load and Visualize the Corresponding Weekly Dengue Fever Cases</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-1-5-visualize-the-weekly-dengue-fever-cases"><strong>Section 1.5: Visualize the Weekly Dengue Fever Cases</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-exercises-1-5">Coding Exercises 1.5</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-1-5">Questions 1.5</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-regression-on-dengue-fever-dataset"><strong>Section 2 : Regression on Dengue Fever Dataset</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-1-data-preprocessing"><strong>Section 2.1: Data Preprocessing</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-2-fitting-model-and-analyzing-results"><strong>Section 2.2: Fitting Model and Analyzing Results</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coding-exercise-2-2-implement-regression-on-dengue-fever-dataset-and-evaluate-the-performance">Coding Exercise 2.2: Implement Regression on Dengue Fever Dataset and Evaluate the Performance</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-2-2"><strong>Questions 2.2</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bonus-section-2-3-handling-different-scenarios"><strong>(Bonus) Section 2.3 : Handling Different Scenarios</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-3-1-handling-categorical-regressors"><strong>Section 2.3.1: Handling Categorical Regressors</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#section-2-3-2-handling-integer-valued-dependent-variables"><strong>Section 2.3.2 : Handling Integer Valued Dependent Variables</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-2-3-performance-of-the-model"><strong>Question 2.3: Performance of the Model</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-decision-trees"><strong>Section 3: Decision Trees</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-1-fitting-model-and-analyzing-results"><strong>Section 3.1: Fitting Model and Analyzing Results</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-3-1-reflecting-on-the-performance">Question 3.1: Reflecting on the Performance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-3-2-looking-at-feature-importance"><strong>Section 3.2: Looking at Feature Importance</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-3-2-climate-connection"><strong>Question 3.2: Climate Connection</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bonus-section-3-3-comparing-feature-importance-methods"><strong>(Bonus) Section 3.3: Comparing Feature Importance Methods</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-3-3-climate-connection"><strong>Question 3.3: Climate Connection</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary"><strong>Summary</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#extra-exercises-or-project-ideas">Extra Exercises or Project Ideas</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#resources"><strong>Resources</strong></a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Climatematch
</p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
<a href="http://creativecommons.org/licenses/by/4.0/"><img src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a>
<a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://camo.githubusercontent.com/9b9ea65d95c9ef878afa1987df65731d47681336/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f736561626f726e2e737667"></a>
The contents of this repository are shared under the <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
Software elements are additionally licensed under the <a href="https://opensource.org/licenses/BSD-3-Clause">BSD (3-Clause) License</a>.
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>